(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4242feca"],{1799:function(e,t,a){"use strict";var c=a("7a23"),r={"aria-label":"Page navigation example"},o={class:"pagination"},n=Object(c["createVNode"])("span",{"aria-hidden":"true"},"«",-1),l=Object(c["createVNode"])("span",{"aria-hidden":"true"},"»",-1);function d(e,t,a,d,i,s){return Object(c["openBlock"])(),Object(c["createBlock"])("nav",r,[Object(c["createVNode"])("ul",o,[Object(c["createVNode"])("li",{class:["page-item",{disabled:!a.pages["has_pre"]}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(){return s.prePage&&s.prePage.apply(s,arguments)}),["prevent"]))},[n])],2),(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(a.pages["total_pages"],(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:["page-item",{active:a.pages["current_page"]===e}],key:e},[Object(c["createVNode"])("a",{class:"page-link",href:"#",onClick:Object(c["withModifiers"])((function(t){return s.changePage(e)}),["prevent"])},Object(c["toDisplayString"])(e),9,["onClick"])],2)})),128)),Object(c["createVNode"])("li",{class:["page-item",{disabled:!a.pages["has_next"]}]},[Object(c["createVNode"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(){return s.nextPage&&s.nextPage.apply(s,arguments)}),["prevent"]))},[l])],2)])])}var i={emits:["switchPage"],props:{pages:{type:Object,required:!0}},methods:{changePage:function(e){this.$emit("switchPage",e)},prePage:function(){var e=this.pages.current_page;this.$emit("switchPage",e-1)},nextPage:function(){var e=this.pages.current_page;this.$emit("switchPage",e+1)}}};i.render=d;t["a"]=i},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var c=a("1d80"),r=a("5899"),o="["+r+"]",n=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),d=function(e){return function(t){var a=String(c(t));return 1&e&&(a=a.replace(n,"")),2&e&&(a=a.replace(l,"")),a}};e.exports={start:d(1),end:d(2),trim:d(3)}},7156:function(e,t,a){var c=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var o,n;return r&&"function"==typeof(o=t.constructor)&&o!==a&&c(n=o.prototype)&&n!==a.prototype&&r(e,n),e}},a9e3:function(e,t,a){"use strict";var c=a("83ab"),r=a("da84"),o=a("94ca"),n=a("6eeb"),l=a("5135"),d=a("c6b6"),i=a("7156"),s=a("c04e"),b=a("d039"),u=a("7c73"),p=a("241c").f,O=a("06cf").f,j=a("9bf2").f,h=a("58a8").trim,f="Number",m=r[f],g=m.prototype,N=d(u(g))==f,V=function(e){var t,a,c,r,o,n,l,d,i=s(e,!1);if("string"==typeof i&&i.length>2)if(i=h(i),t=i.charCodeAt(0),43===t||45===t){if(a=i.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(i.charCodeAt(1)){case 66:case 98:c=2,r=49;break;case 79:case 111:c=8,r=55;break;default:return+i}for(o=i.slice(2),n=o.length,l=0;l<n;l++)if(d=o.charCodeAt(l),d<48||d>r)return NaN;return parseInt(o,c)}return+i};if(o(f,!m(" 0o1")||!m("0b1")||m("+0x1"))){for(var v,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(N?b((function(){g.valueOf.call(a)})):d(a)!=f)?i(new m(V(t)),a,k):V(t)},y=c?p(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;y.length>x;x++)l(m,v=y[x])&&!l(k,v)&&j(k,v,O(m,v));k.prototype=g,g.constructor=k,n(r,f,k)}},b0c0:function(e,t,a){var c=a("83ab"),r=a("9bf2").f,o=Function.prototype,n=o.toString,l=/^\s*function ([^ (]*)/,d="name";c&&!(d in o)&&r(o,d,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(e){return""}}})},e93c:function(e,t,a){"use strict";a.r(t);a("99af"),a("a9e3"),a("b680");var c=a("7a23"),r={class:"table mt-4"},o=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr",null,[Object(c["createVNode"])("th",null,"購買時間"),Object(c["createVNode"])("th",null,"Email"),Object(c["createVNode"])("th",null,"購買款項"),Object(c["createVNode"])("th",null,"應付金額"),Object(c["createVNode"])("th",null,"是否付款"),Object(c["createVNode"])("th",null,"編輯")])],-1),n={class:"list-unstyled"},l={class:"text-right"},d={class:"form-check form-switch"},i={key:0},s={key:1},b={class:"btn-group"},u={class:"d-flex justify-content-center"};function p(e,t,a,p,O,j){var h=Object(c["resolveComponent"])("Pagination"),f=Object(c["resolveComponent"])("order-modal"),m=Object(c["resolveComponent"])("delete-modal");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])("table",r,[o,Object(c["createVNode"])("tbody",null,[O.orderData.length?(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],{key:0},Object(c["renderList"])(O.orderData,(function(t){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:t.id},[Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.dateFormat(t.create_at)),1),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(t.user.email),1)]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("ul",n,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(t.products,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{key:e},Object(c["toDisplayString"])("".concat(e.product.title," 數量：").concat(e.qty," ").concat(e.product.unit)),1)})),128))])]),Object(c["createVNode"])("td",l,Object(c["toDisplayString"])(Number(t.total.toFixed(2))),1),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",d,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox",id:t.id,"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return j.updatePayment(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[c["vModelCheckbox"],t.is_paid]]),Object(c["createVNode"])("label",{class:"form-check-label",for:t.id},[t.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",i,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",s,"未付款"))],8,["for"])])]),Object(c["createVNode"])("td",null,[Object(c["createVNode"])("div",b,[Object(c["createVNode"])("button",{class:"btn btn-outline-primary btn-sm",onClick:Object(c["withModifiers"])((function(e){return j.openModal(t)}),["prevent"])}," 檢視 ",8,["onClick"]),Object(c["createVNode"])("button",{class:"btn btn-outline-danger btn-sm",onClick:Object(c["withModifiers"])((function(e){return j.openDeleteModal(t)}),["prevent"])}," 刪除 ",8,["onClick"])])])])})),128)):Object(c["createCommentVNode"])("",!0)])]),Object(c["createVNode"])("div",u,[Object(c["createVNode"])(h,{pages:O.pages,onSwitchPage:j.getOrder},null,8,["pages","onSwitchPage"])]),Object(c["createVNode"])(f,{ref:"orderModal",details:O.orderDetails,onUpdatePaymentStatus:j.updatePayment},null,8,["details","onUpdatePaymentStatus"]),Object(c["createVNode"])(m,{ref:"deleteModal",details:O.orderDetails,category:"order",onDeleteData:j.deleteOrder},null,8,["details","onDeleteData"])],64)}var O=a("5530"),j=a("1da1"),h=(a("96cf"),a("1799")),f=(a("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"}),m={class:"modal-dialog modal-xl",role:"document"},g={class:"modal-content border-0"},N=Object(c["createVNode"])("div",{class:"modal-header bg-dark text-white"},[Object(c["createVNode"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(c["createVNode"])("span",null,"訂單細節")]),Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),V={class:"modal-body"},v={class:"row"},k={class:"col-md-4"},y=Object(c["createVNode"])("h3",null,"用戶資料",-1),x={class:"table"},w=Object(c["createVNode"])("th",{style:{width:"100px"}},"姓名",-1),D=Object(c["createVNode"])("th",null,"Email",-1),M=Object(c["createVNode"])("th",null,"電話",-1),B=Object(c["createVNode"])("th",null,"地址",-1),P={class:"col-md-8"},S=Object(c["createVNode"])("h3",null,"訂單細節",-1),C={class:"table"},_=Object(c["createVNode"])("th",{style:{width:"100px"}},"訂單編號",-1),E=Object(c["createVNode"])("th",null,"下單時間",-1),I=Object(c["createVNode"])("th",null,"付款時間",-1),$=Object(c["createVNode"])("th",null,"付款狀態",-1),F={key:0,class:"text-success"},A={key:1,class:"text-muted"},L=Object(c["createVNode"])("th",null,"總金額",-1),R=Object(c["createVNode"])("h3",null,"選購商品",-1),T={class:"table"},U=Object(c["createVNode"])("thead",null,[Object(c["createVNode"])("tr")],-1),q={class:"text-end"},G={class:"d-flex justify-content-end"},J={class:"form-check"},X={class:"form-check-label",for:"flexCheckDefault"},Y={key:0},z={key:1},H={class:"modal-footer"},K=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Q(e,t,a,r,o,n){var l,d,i,s;return Object(c["openBlock"])(),Object(c["createBlock"])("div",f,[Object(c["createVNode"])("div",m,[Object(c["createVNode"])("div",g,[N,Object(c["createVNode"])("div",V,[Object(c["createVNode"])("div",v,[Object(c["createVNode"])("div",k,[y,Object(c["createVNode"])("table",x,[Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[w,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(null===(l=o.order.user)||void 0===l?void 0:l.name),1)]),Object(c["createVNode"])("tr",null,[D,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(null===(d=o.order.user)||void 0===d?void 0:d.email),1)]),Object(c["createVNode"])("tr",null,[M,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(null===(i=o.order.user)||void 0===i?void 0:i.tel),1)]),Object(c["createVNode"])("tr",null,[B,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(null===(s=o.order.user)||void 0===s?void 0:s.address),1)])])])]),Object(c["createVNode"])("div",P,[S,Object(c["createVNode"])("table",C,[Object(c["createVNode"])("tbody",null,[Object(c["createVNode"])("tr",null,[_,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(o.order.id),1)]),Object(c["createVNode"])("tr",null,[E,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.dateFormat(o.order.create_at)),1)]),Object(c["createVNode"])("tr",null,[I,Object(c["createVNode"])("td",null,[Object(c["createVNode"])("span",null,Object(c["toDisplayString"])(e.$filters.dateFormat(o.order.paid_date)),1)])]),Object(c["createVNode"])("tr",null,[$,Object(c["createVNode"])("td",null,[o.order.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("strong",F,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",A,"尚未付款"))])]),Object(c["createVNode"])("tr",null,[L,Object(c["createVNode"])("td",null,Object(c["toDisplayString"])(o.order.total),1)])])]),R,Object(c["createVNode"])("table",T,[U,Object(c["createVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.order.products,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("tr",{key:e.id},[Object(c["createVNode"])("th",null,Object(c["toDisplayString"])(e.product.title),1),Object(c["createVNode"])("td",null,Object(c["toDisplayString"])("".concat(e.qty," / ").concat(e.product.unit)),1),Object(c["createVNode"])("td",q,Object(c["toDisplayString"])(e.final_total),1)])})),128))])]),Object(c["createVNode"])("div",G,[Object(c["createVNode"])("div",J,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.order.is_paid=e})},null,512),[[c["vModelCheckbox"],o.order.is_paid]]),Object(c["createVNode"])("label",X,[o.order.is_paid?(Object(c["openBlock"])(),Object(c["createBlock"])("span",Y,"已付款")):(Object(c["openBlock"])(),Object(c["createBlock"])("span",z,"未付款"))])])])])])]),Object(c["createVNode"])("div",H,[K,Object(c["createVNode"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=Object(c["withModifiers"])((function(){return n.updatePayment&&n.updatePayment.apply(n,arguments)}),["prevent"]))}," 修改付款狀態 ")])])])],512)}var W=a("7c2b"),Z=a.n(W),ee={emits:["updatePaymentStatus"],props:{details:Object},data:function(){return{modal:"",order:{}}},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()},updatePayment:function(){this.$emit("updatePaymentStatus",this.order),this.modal.hide()}},mounted:function(){this.modal=new Z.a(this.$refs.modal)},watch:{details:function(e){this.order=e}}};ee.render=Q;var te=ee,ae=a("ec05"),ce={components:{Pagination:h["a"],OrderModal:te,DeleteModal:ae["a"]},inject:["httpMsg"],created:function(){this.getOrder()},data:function(){return{orderData:[],currentPage:1,orderDetails:{},pages:{}}},methods:{getOrder:function(){var e=arguments,t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,o,n,l,d,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=e.length>0&&void 0!==e[0]?e[0]:1,r=t.$loading.show(),o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sec-hexschool","/admin/orders?page=").concat(c),a.prev=3,a.next=6,t.axios.get(o);case 6:if(n=a.sent,r.hide(),l=n.data,d=l.success,i=l.orders,s=l.pagination,d){a.next=11;break}throw new Error(n.data.message);case 11:t.orderData=i,t.pages=s,t.currentPage=c,a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](3),alert(a.t0.message);case 19:case"end":return a.stop()}}),a,null,[[3,16]])})))()},deleteOrder:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,o,n,l,d,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=e.id,r=t.$loading.show(),o="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sec-hexschool","/admin/order/").concat(c),a.prev=3,a.next=6,t.axios.delete(o);case 6:if(n=a.sent,r.hide(),l=n.data,d=l.message,i=l.success,i){a.next=11;break}throw new Error(d);case 11:t.$refs.deleteModal.closeModal(),t.getOrder(t.currentPage),t.httpMsg(!0,"删除订单"),a.next=19;break;case 16:a.prev=16,a.t0=a["catch"](3),t.httpMsg(!1,"删除订单");case 19:case"end":return a.stop()}}),a,null,[[3,16]])})))()},openModal:function(e){this.orderDetails=Object(O["a"])({},e),this.$refs.orderModal.openModal()},openDeleteModal:function(e){this.orderDetails=Object(O["a"])({},e),this.$refs.deleteModal.openModal()},updatePayment:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function a(){var c,r,o,n,l,d,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return c=t.$loading.show(),r="".concat("https://vue3-course-api.hexschool.io","/api/").concat("sec-hexschool","/admin/order/").concat(e.id),o=Object(O["a"])({},e),a.prev=3,a.next=6,t.axios.put(r,{data:o});case 6:if(n=a.sent,c.hide(),l=n.data,d=l.message,i=l.success,i){a.next=11;break}throw new Error(d);case 11:t.httpMsg(!0,d),t.getOrder(t.currentPage),a.next=18;break;case 15:a.prev=15,a.t0=a["catch"](3),t.httpMsg(!1,"修改");case 18:case"end":return a.stop()}}),a,null,[[3,15]])})))()}}};ce.render=p;t["default"]=ce},ec05:function(e,t,a){"use strict";var c=a("7a23"),r={class:"modal fade",id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},o={class:"modal-dialog",role:"document"},n={class:"border-0 modal-content"},l={class:"text-white modal-header bg-danger"},d={class:"modal-title"},i=Object(c["createVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),s={class:"modal-body"},b=Object(c["createTextVNode"])(" 是否刪除 "),u={class:"text-danger"},p=Object(c["createTextVNode"])(" (刪除後將無法恢復)。 "),O={class:"modal-footer"},j=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function h(e,t,a,h,f,m){return Object(c["openBlock"])(),Object(c["createBlock"])("div",r,[Object(c["createVNode"])("div",o,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("h5",d,[Object(c["createVNode"])("span",null,"刪除 "+Object(c["toDisplayString"])(f.tempData.title),1)]),i]),Object(c["createVNode"])("div",s,[b,Object(c["createVNode"])("strong",u,Object(c["toDisplayString"])(f.tempData.title),1),p]),Object(c["createVNode"])("div",O,[j,Object(c["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=Object(c["withModifiers"])((function(){return m.confirmDelete&&m.confirmDelete.apply(m,arguments)}),["prevent"]))}," 確認刪除 ")])])])],512)}var f=a("5530"),m=a("7c2b"),g=a.n(m),N={emits:["deleteData"],props:{details:Object,category:{required:!0,type:String}},data:function(){return{modal:"",tempData:{}}},mounted:function(){this.modal=new g.a(this.$refs.modal)},methods:{openModal:function(){this.modal.show()},closeModal:function(){this.modal.hide()},confirmDelete:function(){this.$emit("deleteData",this.tempData)}},watch:{details:function(e){this.tempData=Object(f["a"])({},e)}}};N.render=h;t["a"]=N}}]);
//# sourceMappingURL=chunk-4242feca.1e11b4ff.js.map